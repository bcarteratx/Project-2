<%- include('../partials/header') %>

<h3>Event Details</h3>
<form class="deletebtn" action="/events/<%= event._id %>?_method=DELETE" method="POST">
    <button type="submit" id="deletebtn">Delete Event</button>
</form>
</form>
<form action="/events/update/<%= event._id %>" method="GET">
  <button type="submit">Update Event Details</button>
</form>
<br>
<section id="show-page">
    <img class="show-img" src="../images/<%= event.img %>">
    <div>Type of Event: </div>
    <div><%= event.eventType %></div>
    <div>Location: </div>
    <div><%= event.location %></div>
    <div>Trail Length: </div>
    <div><%= event.miles %></div>
    <div>Volunteers:</div>
  <ul>
    <%- event.volunteers.map(v => 
      `<li>${v.name} <small>${v.hours}</small></li>`
    ).join('') %>
  </ul>
</section>

<form action="/volunteers/events/<%= event._id%>/volunteers" method="POST">
    <select class="browser-default" name="volunteerId">
      <%- volunteers.map(v => `<option value="${v._id}">${v.name}</option>`).join('') %>
    </select>
    <button type="submit">Add Volunteer to Event</button>
</form>


<% if (event.volunteers.length) { %>
  <table>
    <thead>
      <tr>
        <th>Name.</th>
        <th>Volunteer Hours</th>
      </tr>
    </thead>
    <tbody>
      <% event.volunteers.forEach((v) => { %>
        <tr>
          <td><%= v.name %></td>
          <td><%= v.hours %></td>
        </tr>
      <% }); %>
    </tbody>
  </table>
<% } %>


<%- include('../partials/footer') %>
